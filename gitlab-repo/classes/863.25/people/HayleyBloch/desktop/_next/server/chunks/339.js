exports.id=339,exports.ids=[339],exports.modules={2339:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>n});var d=c(8732),e=c(2015),f=c(6952),g=c.n(f),h=c(6974);class i{constructor(){this.cursor={x:0,y:0},this.boundingBox={top:0,left:0,width:0,height:0},this.offset={x:0,y:0},this.window={x:0,y:0,width:0,height:0}}}let j=a=>{let{windowData:b,windowCompositor:c,parent:f,isMaximized:j}=a,[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)("auto"),o=(0,e.useRef)(!1),p=(0,e.useRef)("none"),q=(0,e.useRef)(new i),r=(0,e.useRef)(null),s=a=>{let b=r.current;if(null===b)return"none";let c=b.getBoundingClientRect(),d=30>Math.abs(a.clientX-c.left),e=30>Math.abs(a.clientX-(c.left+c.width)),f=30>Math.abs(a.clientY-c.top),g=30>Math.abs(a.clientY-(c.top+c.height));return f&&d?"nw":f&&e?"ne":g&&d?"sw":g&&e?"se":f?"n":g?"s":e?"e":d?"w":"none"},t=a=>{let c=r.current;if(null===c)return;window.addEventListener("pointerup",u),window.addEventListener("pointermove",v),o.current=!0;let d=s(a);p.current=d;let e=c.getBoundingClientRect();l(!0),j.current=!1,q.current.cursor={x:a.clientX,y:a.clientY},q.current.window={x:b.x,y:b.y,width:b.width,height:b.height};let g=b.y+f.offsetTop,h=b.x+f.offsetLeft;d.split("").forEach(a=>{switch(a){case"n":q.current.offset.y=q.current.cursor.y-g;break;case"s":q.current.offset.y=q.current.cursor.y-(g+b.height);break;case"w":q.current.offset.x=q.current.cursor.x-h;break;case"e":q.current.offset.x=q.current.cursor.x-(h+b.width)}}),q.current.boundingBox={top:e.top,left:e.left,width:e.width,height:e.height}};function u(a){window.removeEventListener("pointerup",u),window.removeEventListener("pointermove",v),o.current=!1,l(!1)}function v(a){if(!o.current)return;let d={x:b.x,y:b.y,height:b.height,width:b.width},e=b.minimalHeight,g=b.minimalWidth,i=window.innerHeight,j=window.innerWidth,k=q.current.offset.x,l=q.current.offset.y,[m,n]=[q.current.cursor.x-(0,h.qE)(a.clientX,f.offsetLeft+k,f.offsetWidth+k),q.current.cursor.y-(0,h.qE)(a.clientY,f.offsetTop+l,f.offsetTop+f.offsetHeight+l)],[r,s]=[q.current.window.x,q.current.window.y],[t,u]=[q.current.window.width,q.current.window.height];for(let a of p.current.split(""))switch(a){case"n":{let a=s+(u-e),c=Math.min(s-n,a),d=(0,h.qE)(u+n,e,i);b.y=c,b.height=d}break;case"e":b.width=(0,h.qE)(t-m,g,j);break;case"s":b.height=(0,h.qE)(u-n,e,i);break;case"w":{let a=r+(t-g),c=Math.min(r-m,a),d=(0,h.qE)(t+m,g,j);b.x=c,b.width=d}}let v=d.x!==b.x||d.y!==b.y,w=d.height!==b.height||d.width!==b.width;c.update(b,{moved:v,resized:w})}function w(a){let b=(a=>{switch(s(a)){case"none":return"none";case"e":case"w":return"ew";case"n":case"s":return"ns";case"ne":case"sw":return"nesw";case"se":case"nw":return"nwse"}})(a);if("none"===b)return void n("auto");n(`${b}-resize`)}(0,e.useEffect)(()=>{let a=r.current;if(null!==a)return a.addEventListener("pointerdown",t),a.addEventListener("pointermove",w),()=>{a.removeEventListener("pointerdown",t),a.removeEventListener("pointermove",w)}},[]);let x={cursor:m};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{ref:r,"data-interactive-window":!0,className:g().resizable,style:x}),k&&(0,d.jsx)("div",{"data-interactive-window":!0,className:g()["resizing-mask"],style:x})]})};function k(a){let b=a.prompt,c=(0,e.useRef)(null),[f,h]=(0,e.useReducer)(a=>!a,!0);return b?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:g()["action-overlay"],children:(0,d.jsxs)("div",{className:g()["action-container"],children:[(0,d.jsx)("span",{children:b.prompt}),(0,d.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),a.stopPropagation(),!b||!c.current)return;let d=c.current.value;b.resolve(d)},children:[(0,d.jsx)("input",{ref:c,type:"text",className:"system-text-input",defaultValue:b.defaultValue,required:!0}),(0,d.jsxs)("div",{className:g()["action-buttons"],children:[(0,d.jsx)("button",{className:"system-button",type:"button",onClick:()=>void(b&&b.reject("Prompt canceled by user")),children:"Cancel"}),(0,d.jsx)("button",{className:"system-button",type:"submit",children:"Ok"})]})]})]})})}):(0,d.jsx)(d.Fragment,{})}function l(a){let b=a.alert,c=(0,e.useRef)(null),[f,h]=(0,e.useReducer)(a=>!a,!0);return b?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:g()["action-overlay"],children:(0,d.jsxs)("div",{className:g()["action-container"],children:[(0,d.jsx)("span",{children:b.alert}),(0,d.jsx)("div",{className:g()["action-buttons"],children:(0,d.jsx)("button",{ref:c,className:"system-button",type:"submit",onClick:()=>void(b&&b.resolve()),children:"Ok"})})]})})}):(0,d.jsx)(d.Fragment,{})}function m(a){let b=a.action;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k,{prompt:b?.action==="prompt"?b:null}),(0,d.jsx)(l,{alert:b?.action==="alert"?b:null})]})}function n(a){let b,{window:c,WindowApp:f,windowCompositor:k}=a,l=(0,e.useRef)(!1);if(null===a.parent)return(0,d.jsx)(d.Fragment,{});let n=a.parent,o={position:"absolute",display:(b=c).minimized?"none":"block",top:`${b.y}px`,left:`${b.x}px`,width:`${b.width}px`,height:`${b.height}px`,zIndex:1e3+10*b.order},p=((a,b,c,f)=>{let[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),n=a.application.apis,o=(0,e.useRef)(null),p=(0,e.useRef)(0),q=(0,e.useRef)(!1),r=(0,e.useRef)(new i),s=(0,e.useRef)({x:0,y:0,width:0,height:0}),t=[g().header];function u(){!1===f.current?(s.current={x:a.x,y:a.y,width:a.width,height:a.height},a.x=0,a.y=0,a.width=c.offsetWidth,a.height=c.offsetHeight,b.update(a),b.focus(a.id)):(a.x=s.current.x,a.y=s.current.y,a.width=s.current.width,a.height=s.current.height,b.update(a)),f.current=!f.current}function v(){p.current=0}function w(c){if(c.target!==o.current)return void v();window.addEventListener("pointermove",x),window.addEventListener("pointerup",y),function(){if(null===p.current)return;let a=Date.now();a-p.current<1e3?(u(),v()):p.current=a}();let d=o.current.parentNode.parentNode.parentNode;k(!0),q.current=!0;let e=d.getBoundingClientRect(),f=c.clientY-e.y;r.current.offset.y=f,r.current.offset.x=0,a.focused||b.focus(a.id),r.current.cursor={x:c.clientX,y:c.clientY},r.current.window={x:a.x,y:a.y,width:a.width,height:a.height}}function x(d){if(!q.current)return;f.current=!1,v();let e=r.current.cursor,g=r.current.window,i=(0,h.qE)(d.clientX,c.offsetLeft,c.offsetWidth),j=(0,h.qE)(d.clientY,c.offsetTop+r.current.offset.y,c.offsetHeight+r.current.offset.y),k=e.x-i,l=e.y-j,m=g.x-k,n=g.y-l;a.x=m,a.y=Math.max(n,0),b.update(a)}function y(a){window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",y),k(!1),q.current=!1}function z(a){m(a.isMobileDevice())}return l&&t.push(g().mobile),a.focused&&t.push(g().focused),(0,e.useEffect)(()=>{let a=o.current;if(null===a)return;let b=n.screen.subscribe(z),c=n.screen.getResolution();return c&&z(c),a.addEventListener("pointerdown",w),()=>{b(),a.removeEventListener("pointerdown",w)}},[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{ref:o,"data-interactive-window":!0,className:t.join(" "),children:[(0,d.jsx)("span",{className:g()["header-title"],children:a.title}),(0,d.jsx)("div",{className:g().lines}),(0,d.jsxs)("div",{className:g()["header-buttons"],children:[(0,d.jsx)("button",{className:"header-button",onClick:()=>{b.minimize(a.id)},children:(0,d.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAC5JREFUKJFjYBh+gBFK/ydFDyMShxiNjMg2EaOREYNBQCMjTg4OjbjUENQ4lAAAsBUGBRYmg2IAAAAASUVORK5CYII=",alt:"Minimize window",draggable:!1})}),(0,d.jsx)("button",{className:"header-button",onClick:u,children:(0,d.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAADBJREFUKJFjYBhZ4D8uCUYiNGCowaYJmw2MODn4nISsFlkTPg0o6mGaiNGAzaLBCACuAwYFQV/6vgAAAABJRU5ErkJggg==",alt:"Maximize window",draggable:!1})}),(0,d.jsx)("button",{className:"header-button",onClick:()=>{b.close(a.id)},children:(0,d.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXNSR0IArs4c6QAAAEhJREFUKJFjYKAA/IdiotQwYZHApQEOGHFI4BVHlsSmAKtB6JpwOZERJwefkwhpImgTvtDDFRiUhR5eP6DLozsPV8DgEiceAADT2BMJIsMZOQAAAABJRU5ErkJggg==",alt:"Close window",draggable:!1})})]})]}),j&&(0,d.jsx)("div",{className:g()["dragging-mask"]})]})})(c,k,n,l),q=c.focused?g().focused:"",r=`${g()["content-container"]} ${q}`,s={id:c.id};return(0,d.jsx)("div",{style:o,"data-window-root":"true",children:(0,d.jsxs)("div",{className:g().container,children:[!c.focused&&(0,d.jsx)("div",{onPointerDown:function(){k.focus(c.id)},className:g()["focus-layer"]}),c.focused&&(0,d.jsx)(j,{windowData:c,windowCompositor:k,parent:n,isMaximized:l}),(0,d.jsxs)("div",{className:r,children:[p,(0,d.jsxs)("div",{className:g().content,children:[(0,d.jsx)(m,{action:c.action}),(0,d.jsx)(f,{application:c.application,args:c.args,windowContext:s})]})]})]})})}},6952:a=>{a.exports={container:"WindowContainer_container__A6uBo","content-container":"WindowContainer_content-container__dOk9P",focused:"WindowContainer_focused__Gqruf",resizable:"WindowContainer_resizable__bLqVU","focus-layer":"WindowContainer_focus-layer__XmRuW",header:"WindowContainer_header__hGKJN",mobile:"WindowContainer_mobile__S38TS",lines:"WindowContainer_lines__HbTIs",content:"WindowContainer_content__Zm4uC","resizing-mask":"WindowContainer_resizing-mask__mXyBh","dragging-mask":"WindowContainer_dragging-mask__88KWa","header-title":"WindowContainer_header-title__GxSvJ","header-buttons":"WindowContainer_header-buttons__quaZm","action-overlay":"WindowContainer_action-overlay__yzLLS","action-container":"WindowContainer_action-container__ocdU9","action-buttons":"WindowContainer_action-buttons__eXP8S"}}};